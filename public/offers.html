<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Fleecebag</title>
    <link rel="icon" href="img/purse.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.css" />
    <link rel="stylesheet" href="/css/style.css">
    <script src="/controllers/script.js" defer></script>
</head>

<body>
    <header>
        <section id="topbar">
            <div class="container-fluid text-dark text-center">Free Shipping on orders above ₹999</div>
            <div class="container-fluid text-center text-white bg-dark">
                <div class="row">
                    <div class="col-4">Flat 10% off - 3 items</div>
                    <div class="col-4">Flat 25% off - 5 items</div>
                    <div class="col-4">Flat 50% off - 10 items</div>
                </div>
            </div>
        </section>

        <div id="header-container"></div> <!-- Header will be injected here -->
    </header>

    <div class="container mt-3">
        <!-- jumbotrons -->
        <div class=" py-2 mb-4">
            <div class="container-fluid">
                <a href="other.html">
                    <img src="images/offer1.webp" class="img-fluid"></a>
            </div>
        </div>

        <div class="row align-items-md-stretch">
            <div class="col-md-6">
                <div class="h-100 py-5 rounded-3">
                    <a href="other.html">
                        <img src="images/offer2.webp" class="img-fluid"></a>
                </div>
            </div>
            <div class="col-md-6">
                <div class="h-100 py-5 rounded-3">
                    <a href="other.html">
                        <img src="images/offer3.webp" class="img-fluid"></a>
                </div>
            </div>
        </div>

        <main>
            <section id="shop" class="product-listings">
                <div class="container">
                    <h2>School Bags</h2>
                    <table>
                        <tr id="school-bags">
                        </tr>
                    </table>
                </div>
                <div class="container">
                    <h2>Travel Bags</h2>
                    <table>
                        <tr id="travel-bags">
                        </tr>
                    </table>
                </div>
                <div class="container">
                    <h2>Tote Bags</h2>
                    <table>
                        <tr id="tote-bags">
                        </tr>
                    </table>
                </div>
            </section>
        </main>


        <footer>
            <div class="container py-4 pt-5">
                <div class="row justify-content-center">
                    <div class="col-sm-4 col-md-3 text-center text-lg-start d-flex flex-column item">
                        <h3 class="fs-6">About</h3>
                        <ul class="list-unstyled">
                            <li><a href="#">Terms & Conditions</a></li>
                            <li><a href="#">FAQs</a></li>
                        </ul>
                        <h3 class="fs-6">Contact Us</h3>
                        <ul class="list-unstyled">
                            <li><a style="color: #E5989B;" href="#">support@fleecebag.in</a></li>
                        </ul>
                    </div>
                    <div class="col-sm-4 col-md-3 text-center text-lg-start d-flex flex-column item">
                        <h3 class="fs-6">Customer Service</h3>
                        <ul class="list-unstyled">
                            <li><a href="#" style="color:#2c5364; font-weight: 600;">Track Order</a></li>
                            <li><a href="terms&condition.html">Return Policy</a></li>
                            <li><a href="privacy.html">Privacy Policy</a></li>
                            <li><a href="https://www.shiprocket.in/blog/ecommerce-shipping-policy/">Shipping
                                    Information</a></li>
                        </ul>
                    </div>
                    <div
                        class="col-lg-3 text-center text-lg-start d-flex flex-column align-items-center order-first align-items-lg-start order-lg-last item social">
                        <div class="fw-bold d-flex align-items-center mb-2"><img src="img/purse.png" height="25px"
                                style="padding-right: 10px;"></span><span>Fleecebag</span></div>
                        <p class="text-muted copyright">Think Once, Think Twice, Think Bags</p>
                        <h3 class="fs-6 mt-3">Follow Us</h3>
                        <ul class="social mb-0 list-inline">
                            <li class="list-inline-item"><a class="social-link"><i
                                        class="fa-brands fa-facebook-f"></i></a></li>
                            <li class="list-inline-item"><a class="social-link"><i
                                        class="fa-brands fa-instagram"></i></a></li>
                            <li class="list-inline-item"><a class="social-link"><i class="fa-brands fa-twitter"></i></a>
                            </li>
                        </ul>
                    </div>
                </div>
                <hr>
                <div class="d-flex justify-content-around align-items-center pt-3">
                    <p class="text-muted text-uppercase mb-0">Copyright © 2022 All Rights Reserved</p>
                </div>
            </div>
        </footer>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/egjs-agent/2.4.3/agent.min.js"></script>
        <script src="script.js"></script>


        <script>
            const api_baseURL = 'http://localhost:8080';

            async function fetchProductData() {

                try {
                    const response = await fetch(`${api_baseURL}/offers`);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);

                    }
                    const data = await response.json();

                    if (data.statusCode === 200 && data.data) {
                        renderProducts(data.data);
                    } else {
                        console.error("Failed to load data:", data.message || "Unknown error");
                    }
                } catch (error) {
                    console.error("Error fetching data:", error);
                }
            }


            function renderProducts(products) {
                const schoolBagsTable = document.getElementById('school-bags');
                const toteBagsTable = document.getElementById('tote-bags');
                const travelBagsTable = document.getElementById('travel-bags');

                schoolBagsTable.innerHTML = '';
                toteBagsTable.innerHTML = '';
                travelBagsTable.innerHTML = '';

                products.forEach(product => {
                    const productHTML = `
                        <td class="product-column">
                            <div class="product">
                                <img src="${product.image}" alt="${product.name}" style="width: 300px; height: 300px; object-fit: cover; border-radius: 5px;">
                                 <h3>${product.name}</h3>
                                <span class="text-muted text-decoration-line-through">$${product.Price || product.price}</span>
                                <p>$${product.discountedPrice || product.price}</p>
                                <a href="offers.html"><button>Add to Cart</button></a>
                            </div>
                        </td>
                    `;

                    if (product.type === 'schoolBag') {
                        schoolBagsTable.innerHTML += productHTML;
                    } else if (product.type === 'toteBag') {
                        toteBagsTable.innerHTML += productHTML;
                    } else if (product.type === 'travelBag') {
                        travelBagsTable.innerHTML += productHTML;
                    }
                });
            }

            window.onload = fetchProductData;
        </script>
</body>

</html>
